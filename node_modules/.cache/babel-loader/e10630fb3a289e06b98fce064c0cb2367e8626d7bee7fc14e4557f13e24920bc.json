{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sonam Kumari\\\\OneDrive\\\\Desktop\\\\AptoMed\\\\src\\\\Healthcare.js\",\n  _s = $RefreshSig$();\n// import React, {useState, useEffect} from 'react';\n// import {ethers} from 'ethers';\n\n// const HealthCare = () => {\n//     const [provider, setProvider] = useState(null);\n//     const [signer, setSigner] = useState(null);\n//     const [contract, setContract] = useState(null);\n//     const [account, setAccount] = useState(null);\n//     const [isOwner, setIsOwner] = useState(null);\n//     const [patientID, setPatientID] = useState('');\n//     const [diagnosis, setDiagnosis] = useState('');\n//     const [treatment, setTreatment] = useState('');\n//     const [patientRecords, setPatientRecords] = useState([]);\n\n//     const [providerAddress, setProviderAddress] = useState(\"\");\n//     const contractAddress = \"0x6348995a1972d426b6a7c053fd17a86b243c9d2b\";\n\n//     const contractABI = [\n//         {\n//             \"inputs\": [],\n//             \"stateMutability\": \"nonpayable\",\n//             \"type\": \"constructor\"\n//         },\n//         {\n//             \"inputs\": [\n//                 {\n//                     \"internalType\": \"uint256\",\n//                     \"name\": \"patientID\",\n//                     \"type\": \"uint256\"\n//                 },\n//                 {\n//                     \"internalType\": \"string\",\n//                     \"name\": \"patientName\",\n//                     \"type\": \"string\"\n//                 },\n//                 {\n//                     \"internalType\": \"string\",\n//                     \"name\": \"diagnosis\",\n//                     \"type\": \"string\"\n//                 },\n//                 {\n//                     \"internalType\": \"string\",\n//                     \"name\": \"treatment\",\n//                     \"type\": \"string\"\n//                 }\n//             ],\n//             \"name\": \"addRecord\",\n//             \"outputs\": [],\n//             \"stateMutability\": \"nonpayable\",\n//             \"type\": \"function\"\n//         },\n//         {\n//             \"inputs\": [\n//                 {\n//                     \"internalType\": \"address\",\n//                     \"name\": \"provider\",\n//                     \"type\": \"address\"\n//                 }\n//             ],\n//             \"name\": \"authorizeProvider\",\n//             \"outputs\": [],\n//             \"stateMutability\": \"nonpayable\",\n//             \"type\": \"function\"\n//         },\n//         {\n//             \"inputs\": [],\n//             \"name\": \"getOwner\",\n//             \"outputs\": [\n//                 {\n//                     \"internalType\": \"address\",\n//                     \"name\": \"\",\n//                     \"type\": \"address\"\n//                 }\n//             ],\n//             \"stateMutability\": \"view\",\n//             \"type\": \"function\"\n//         },\n//         {\n//             \"inputs\": [\n//                 {\n//                     \"internalType\": \"uint256\",\n//                     \"name\": \"patientID\",\n//                     \"type\": \"uint256\"\n//                 }\n//             ],\n//             \"name\": \"getPatientRecords\",\n//             \"outputs\": [\n//                 {\n//                     \"components\": [\n//                         {\n//                             \"internalType\": \"uint256\",\n//                             \"name\": \"recordID\",\n//                             \"type\": \"uint256\"\n//                         },\n//                         {\n//                             \"internalType\": \"string\",\n//                             \"name\": \"patientName\",\n//                             \"type\": \"string\"\n//                         },\n//                         {\n//                             \"internalType\": \"string\",\n//                             \"name\": \"diagnosis\",\n//                             \"type\": \"string\"\n//                         },\n//                         {\n//                             \"internalType\": \"string\",\n//                             \"name\": \"treatment\",\n//                             \"type\": \"string\"\n//                         },\n//                         {\n//                             \"internalType\": \"uint256\",\n//                             \"name\": \"timestamp\",\n//                             \"type\": \"uint256\"\n//                         }\n//                     ],\n//                     \"internalType\": \"struct HealthcareRecords.Record[]\",\n//                     \"name\": \"\",\n//                     \"type\": \"tuple[]\"\n//                 }\n//             ],\n//             \"stateMutability\": \"view\",\n//             \"type\": \"function\"\n//         }\n//     ];\n\n//     useEffect(() => {\n//         const connectWallet = async () => {\n//             try {\n//                 const provider = new ethers.providers.Web3Provider(window.ethereum);\n//                 await provider.send('eth_requestAccounts', []);\n//                 const signer = provider.getSigner();\n//                 setProvider(provider);\n//                 setSigner(signer);\n\n//                 const accountAddress = await signer.getAddress();\n//                 setAccount(accountAddress);\n\n//                 console.log(accountAddress);\n\n//                 const contract = new ethers.Contract(contractAddress, contractABI, signer);\n//                 setContract(contract);\n\n//                 const ownerAddress = await contract.getOwner();\n\n//                 setIsOwner(accountAddress.toLowerCase() === ownerAddress.toLowerCase());\n\n//             } catch (error) {\n//                 console.error(\"Error connecting to wallet: \", error);\n//             }\n\n//         };\n//         connectWallet();\n\n//     }, []);\n\n//     const fetchPatientRecords = async () => {\n//         try {\n//             const records = await contract.getPatientRecords(patientID);\n//             console.log(records);\n//             setPatientRecords(records);\n\n//         } catch(error) {\n//             console.error(\"Error fetching patient records\", error);\n//         }\n//     }\n\n//     const addRecord = async () => {\n//         try {\n//             const tx = await contract.addRecord(patientID, \"Alice\", diagnosis, treatment);\n//             await tx.wait();\n//             fetchPatientRecords();\n//             await tx.wait();\n//             alert(`Provider ${providerAddress} authorized successfully`);\n\n//         } catch(error) {\n//             console.error(\"Error adding records\", error);\n//         }\n\n//     }\n\n//     const authorizeProvider = async () => {\n//         if (isOwner){\n//             try {\n//                 const tx = await contract.authorizeProvider(providerAddress);\n//                 await tx.wait();\n//                 alert(`Provider ${providerAddress} authorized successfully`);\n\n//             } catch(error) {\n//                 console.error(\"Only contract owner can authorize different providers\");\n//             }\n//         } else {\n//             alert(\"Only contract owner can call this function\");\n//         }\n//     }\n\n//     return(\n//         <div className='container'>\n//             <h1 className = \"title\">AptoMed <br></br> \"Empowering Patients with Secure, Blockchain-Powered Health Records\"</h1>\n//             {account && <p className='account-info'>Connected Account: {account}</p>}\n//             {isOwner && <p className='owner-info'>You are the contract owner</p>}\n\n//         <div className='form-section'>\n//             <h2>Fetch Patient Records</h2>\n//             <input className='input-field' type='text' placeholder='Enter Patient ID' value={patientID} onChange={(e) => setPatientID(e.target.value)}/>\n//             <button className='action-button' onClick={fetchPatientRecords}>Fetch Records</button>\n//         </div>\n\n//         <div className=\"form-section\">\n//             <h2>Add Patient Record</h2>\n//             <input className='input-field' type='text' placeholder='Diagnosis' value={diagnosis} onChange={(e) => setDiagnosis(e.target.value)}/>\n//             <input className='input-field' type='text' placeholder='Treatment' value={treatment} onChange={(e) => setTreatment(e.target.value)}/>\n//             <button className='action-button' onClick={addRecord}>Add Records</button>\n\n//         </div>\n//         <div className=\"form-section\">\n//             <h2>Authorize HealthCare Provider</h2>\n//             <input className='input-field' type= \"text\" placeholder='Provider Address' value = {providerAddress} onChange={(e) => setProviderAddress(e.target.value)}/>\n//             <button className='action-button' onClick={authorizeProvider}>Authorize Provider</button>\n//         </div>\n\n//         <div className='records-section'>\n//             <h2>Patient Records</h2>\n//             {patientRecords.map((record, index) => (\n//                 <div key = {index}>\n//                     <p>Record ID: {record.recordID.toNumber()}</p>\n//                     <p>Diagnosis: {record.diagnosis}</p>\n//                     <p>Treatment: {record.treatment}</p>\n//                     <p>Timestamp: {new Date(record.timestamp.toNumber() * 1000).toLocaleString()}</p>\n//             </div>\n//             ))}\n//         </div>\n\n//         </div>\n\n//     )\n\n// }\n\n// export default HealthCare;\n\nimport React, { useState, useEffect } from 'react';\nimport { AptosClient, FaucetClient, AptosAccount, HexString } from 'aptos';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst client = new AptosClient(\"https://fullnode.devnet.aptoslabs.com\");\nconst faucetClient = new FaucetClient(\"https://faucet.devnet.aptoslabs.com\", \"https://fullnode.devnet.aptoslabs.com\");\nconst HealthCare = () => {\n  _s();\n  const [account, setAccount] = useState(null);\n  const [balance, setBalance] = useState(null);\n  const [patientID, setPatientID] = useState('');\n  const [diagnosis, setDiagnosis] = useState('');\n  const [treatment, setTreatment] = useState('');\n  const [transactionHash, setTransactionHash] = useState(null);\n  const [patientRecords, setPatientRecords] = useState([]);\n  const authorizedProviders = ['0xYourProviderAddress1', '0xYourProviderAddress2'\n  // Add more provider addresses as needed\n  ];\n  const isAuthorizedProvider = address => {\n    return authorizedProviders.includes(address);\n  };\n  useEffect(() => {\n    const createAccount = async () => {\n      const aptosAccount = new AptosAccount();\n      setAccount(aptosAccount);\n      await faucetClient.fundAccount(aptosAccount.address(), 100000000);\n      const resources = await client.getAccountResources(aptosAccount.address());\n      const accountResource = resources.find(r => r.type === \"0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>\");\n      setBalance(accountResource.data.coin.value);\n    };\n    createAccount();\n  }, []);\n  const addRecord = async () => {\n    // Authorization check\n    if (!isAuthorizedProvider(account.address().toString())) {\n      alert(\"You are not authorized to add patient records.\");\n      return;\n    }\n    try {\n      const payload = {\n        type: \"entry_function_payload\",\n        function: `${account.address()}::HealthcareRecords::add_record`,\n        arguments: [patientID, diagnosis, treatment],\n        type_arguments: []\n      };\n      const txnRequest = await client.generateTransaction(account.address(), payload);\n      const signedTxn = await client.signTransaction(account, txnRequest);\n      const transactionRes = await client.submitTransaction(signedTxn);\n      setTransactionHash(transactionRes.hash);\n      fetchPatientRecords();\n    } catch (error) {\n      console.error(\"Error adding record\", error);\n    }\n  };\n  const fetchPatientRecords = async () => {\n    try {\n      const data = await client.getAccountResources(account.address());\n      setPatientRecords(data); // Assuming that healthcare records are stored in account resources.\n    } catch (error) {\n      console.error(\"Error fetching patient records\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"title\",\n      children: \"AptoMed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this), account && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"account-info\",\n      children: [\"Account Address: \", account.address().toString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 19\n    }, this), balance && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"account-info\",\n      children: [\"Account Balance: \", balance / 1000000, \" APT\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Fetch Patient Records\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input-field\",\n        type: \"text\",\n        placeholder: \"Enter Patient ID\",\n        value: patientID,\n        onChange: e => setPatientID(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"action-button\",\n        onClick: fetchPatientRecords,\n        children: \"Fetch Records\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this), isAuthorizedProvider(account === null || account === void 0 ? void 0 : account.address().toString()) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Add Patient Record\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input-field\",\n        type: \"text\",\n        placeholder: \"Diagnosis\",\n        value: diagnosis,\n        onChange: e => setDiagnosis(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input-field\",\n        type: \"text\",\n        placeholder: \"Treatment\",\n        value: treatment,\n        onChange: e => setTreatment(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"action-button\",\n        onClick: addRecord,\n        children: \"Add Record\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 9\n    }, this), transactionHash && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Transaction Hash: \", transactionHash]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"records-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Patient Records\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), patientRecords.map((record, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"record-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Record ID: \", record.data.recordID]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Diagnosis: \", record.data.diagnosis]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Treatment: \", record.data.treatment]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Timestamp: \", new Date(record.data.timestamp * 1000).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 5\n  }, this);\n};\n_s(HealthCare, \"NrAv6yrll/yzgjT6/5XJdaiI5dg=\");\n_c = HealthCare;\nexport default HealthCare;\nvar _c;\n$RefreshReg$(_c, \"HealthCare\");","map":{"version":3,"names":["React","useState","useEffect","AptosClient","FaucetClient","AptosAccount","HexString","jsxDEV","_jsxDEV","client","faucetClient","HealthCare","_s","account","setAccount","balance","setBalance","patientID","setPatientID","diagnosis","setDiagnosis","treatment","setTreatment","transactionHash","setTransactionHash","patientRecords","setPatientRecords","authorizedProviders","isAuthorizedProvider","address","includes","createAccount","aptosAccount","fundAccount","resources","getAccountResources","accountResource","find","r","type","data","coin","value","addRecord","toString","alert","payload","function","arguments","type_arguments","txnRequest","generateTransaction","signedTxn","signTransaction","transactionRes","submitTransaction","hash","fetchPatientRecords","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","e","target","onClick","map","record","index","recordID","Date","timestamp","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/Sonam Kumari/OneDrive/Desktop/AptoMed/src/Healthcare.js"],"sourcesContent":["// import React, {useState, useEffect} from 'react';\r\n// import {ethers} from 'ethers';\r\n\r\n// const HealthCare = () => {\r\n//     const [provider, setProvider] = useState(null);\r\n//     const [signer, setSigner] = useState(null);\r\n//     const [contract, setContract] = useState(null);\r\n//     const [account, setAccount] = useState(null);\r\n//     const [isOwner, setIsOwner] = useState(null);\r\n//     const [patientID, setPatientID] = useState('');\r\n//     const [diagnosis, setDiagnosis] = useState('');\r\n//     const [treatment, setTreatment] = useState('');\r\n//     const [patientRecords, setPatientRecords] = useState([]);\r\n\r\n\r\n//     const [providerAddress, setProviderAddress] = useState(\"\");\r\n//     const contractAddress = \"0x6348995a1972d426b6a7c053fd17a86b243c9d2b\";\r\n\r\n//     const contractABI = [\r\n//         {\r\n//             \"inputs\": [],\r\n//             \"stateMutability\": \"nonpayable\",\r\n//             \"type\": \"constructor\"\r\n//         },\r\n//         {\r\n//             \"inputs\": [\r\n//                 {\r\n//                     \"internalType\": \"uint256\",\r\n//                     \"name\": \"patientID\",\r\n//                     \"type\": \"uint256\"\r\n//                 },\r\n//                 {\r\n//                     \"internalType\": \"string\",\r\n//                     \"name\": \"patientName\",\r\n//                     \"type\": \"string\"\r\n//                 },\r\n//                 {\r\n//                     \"internalType\": \"string\",\r\n//                     \"name\": \"diagnosis\",\r\n//                     \"type\": \"string\"\r\n//                 },\r\n//                 {\r\n//                     \"internalType\": \"string\",\r\n//                     \"name\": \"treatment\",\r\n//                     \"type\": \"string\"\r\n//                 }\r\n//             ],\r\n//             \"name\": \"addRecord\",\r\n//             \"outputs\": [],\r\n//             \"stateMutability\": \"nonpayable\",\r\n//             \"type\": \"function\"\r\n//         },\r\n//         {\r\n//             \"inputs\": [\r\n//                 {\r\n//                     \"internalType\": \"address\",\r\n//                     \"name\": \"provider\",\r\n//                     \"type\": \"address\"\r\n//                 }\r\n//             ],\r\n//             \"name\": \"authorizeProvider\",\r\n//             \"outputs\": [],\r\n//             \"stateMutability\": \"nonpayable\",\r\n//             \"type\": \"function\"\r\n//         },\r\n//         {\r\n//             \"inputs\": [],\r\n//             \"name\": \"getOwner\",\r\n//             \"outputs\": [\r\n//                 {\r\n//                     \"internalType\": \"address\",\r\n//                     \"name\": \"\",\r\n//                     \"type\": \"address\"\r\n//                 }\r\n//             ],\r\n//             \"stateMutability\": \"view\",\r\n//             \"type\": \"function\"\r\n//         },\r\n//         {\r\n//             \"inputs\": [\r\n//                 {\r\n//                     \"internalType\": \"uint256\",\r\n//                     \"name\": \"patientID\",\r\n//                     \"type\": \"uint256\"\r\n//                 }\r\n//             ],\r\n//             \"name\": \"getPatientRecords\",\r\n//             \"outputs\": [\r\n//                 {\r\n//                     \"components\": [\r\n//                         {\r\n//                             \"internalType\": \"uint256\",\r\n//                             \"name\": \"recordID\",\r\n//                             \"type\": \"uint256\"\r\n//                         },\r\n//                         {\r\n//                             \"internalType\": \"string\",\r\n//                             \"name\": \"patientName\",\r\n//                             \"type\": \"string\"\r\n//                         },\r\n//                         {\r\n//                             \"internalType\": \"string\",\r\n//                             \"name\": \"diagnosis\",\r\n//                             \"type\": \"string\"\r\n//                         },\r\n//                         {\r\n//                             \"internalType\": \"string\",\r\n//                             \"name\": \"treatment\",\r\n//                             \"type\": \"string\"\r\n//                         },\r\n//                         {\r\n//                             \"internalType\": \"uint256\",\r\n//                             \"name\": \"timestamp\",\r\n//                             \"type\": \"uint256\"\r\n//                         }\r\n//                     ],\r\n//                     \"internalType\": \"struct HealthcareRecords.Record[]\",\r\n//                     \"name\": \"\",\r\n//                     \"type\": \"tuple[]\"\r\n//                 }\r\n//             ],\r\n//             \"stateMutability\": \"view\",\r\n//             \"type\": \"function\"\r\n//         }\r\n//     ];\r\n\r\n//     useEffect(() => {\r\n//         const connectWallet = async () => {\r\n//             try {\r\n//                 const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n//                 await provider.send('eth_requestAccounts', []);\r\n//                 const signer = provider.getSigner();\r\n//                 setProvider(provider);\r\n//                 setSigner(signer);\r\n\r\n//                 const accountAddress = await signer.getAddress();\r\n//                 setAccount(accountAddress);\r\n\r\n//                 console.log(accountAddress);\r\n\r\n//                 const contract = new ethers.Contract(contractAddress, contractABI, signer);\r\n//                 setContract(contract);\r\n\r\n//                 const ownerAddress = await contract.getOwner();\r\n\r\n//                 setIsOwner(accountAddress.toLowerCase() === ownerAddress.toLowerCase());\r\n\r\n               \r\n\r\n//             } catch (error) {\r\n//                 console.error(\"Error connecting to wallet: \", error);\r\n//             }\r\n\r\n//         };\r\n//         connectWallet();\r\n\r\n//     }, []);\r\n\r\n\r\n//     const fetchPatientRecords = async () => {\r\n//         try {\r\n//             const records = await contract.getPatientRecords(patientID);\r\n//             console.log(records);\r\n//             setPatientRecords(records);\r\n\r\n//         } catch(error) {\r\n//             console.error(\"Error fetching patient records\", error);\r\n//         }\r\n//     }\r\n\r\n//     const addRecord = async () => {\r\n//         try {\r\n//             const tx = await contract.addRecord(patientID, \"Alice\", diagnosis, treatment);\r\n//             await tx.wait();\r\n//             fetchPatientRecords();\r\n//             await tx.wait();\r\n//             alert(`Provider ${providerAddress} authorized successfully`);\r\n\r\n//         } catch(error) {\r\n//             console.error(\"Error adding records\", error);\r\n//         }\r\n\r\n//     }\r\n\r\n\r\n//     const authorizeProvider = async () => {\r\n//         if (isOwner){\r\n//             try {\r\n//                 const tx = await contract.authorizeProvider(providerAddress);\r\n//                 await tx.wait();\r\n//                 alert(`Provider ${providerAddress} authorized successfully`);\r\n\r\n//             } catch(error) {\r\n//                 console.error(\"Only contract owner can authorize different providers\");\r\n//             }\r\n//         } else {\r\n//             alert(\"Only contract owner can call this function\");\r\n//         }\r\n//     }\r\n\r\n//     return(\r\n//         <div className='container'>\r\n//             <h1 className = \"title\">AptoMed <br></br> \"Empowering Patients with Secure, Blockchain-Powered Health Records\"</h1>\r\n//             {account && <p className='account-info'>Connected Account: {account}</p>}\r\n//             {isOwner && <p className='owner-info'>You are the contract owner</p>}\r\n\r\n//         <div className='form-section'>\r\n//             <h2>Fetch Patient Records</h2>\r\n//             <input className='input-field' type='text' placeholder='Enter Patient ID' value={patientID} onChange={(e) => setPatientID(e.target.value)}/>\r\n//             <button className='action-button' onClick={fetchPatientRecords}>Fetch Records</button>\r\n//         </div>\r\n\r\n//         <div className=\"form-section\">\r\n//             <h2>Add Patient Record</h2>\r\n//             <input className='input-field' type='text' placeholder='Diagnosis' value={diagnosis} onChange={(e) => setDiagnosis(e.target.value)}/>\r\n//             <input className='input-field' type='text' placeholder='Treatment' value={treatment} onChange={(e) => setTreatment(e.target.value)}/>\r\n//             <button className='action-button' onClick={addRecord}>Add Records</button>\r\n\r\n//         </div>\r\n//         <div className=\"form-section\">\r\n//             <h2>Authorize HealthCare Provider</h2>\r\n//             <input className='input-field' type= \"text\" placeholder='Provider Address' value = {providerAddress} onChange={(e) => setProviderAddress(e.target.value)}/>\r\n//             <button className='action-button' onClick={authorizeProvider}>Authorize Provider</button>\r\n//         </div>\r\n\r\n//         <div className='records-section'>\r\n//             <h2>Patient Records</h2>\r\n//             {patientRecords.map((record, index) => (\r\n//                 <div key = {index}>\r\n//                     <p>Record ID: {record.recordID.toNumber()}</p>\r\n//                     <p>Diagnosis: {record.diagnosis}</p>\r\n//                     <p>Treatment: {record.treatment}</p>\r\n//                     <p>Timestamp: {new Date(record.timestamp.toNumber() * 1000).toLocaleString()}</p>\r\n//             </div>\r\n//             ))}\r\n//         </div>\r\n\r\n//         </div>\r\n\r\n//     )\r\n\r\n// }\r\n\r\n// export default HealthCare;\r\n\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { AptosClient, FaucetClient, AptosAccount, HexString } from 'aptos';\r\n\r\nconst client = new AptosClient(\"https://fullnode.devnet.aptoslabs.com\");\r\nconst faucetClient = new FaucetClient(\r\n  \"https://faucet.devnet.aptoslabs.com\",\r\n  \"https://fullnode.devnet.aptoslabs.com\"\r\n);\r\n\r\nconst HealthCare = () => {\r\n  const [account, setAccount] = useState(null);\r\n  const [balance, setBalance] = useState(null);\r\n  const [patientID, setPatientID] = useState('');\r\n  const [diagnosis, setDiagnosis] = useState('');\r\n  const [treatment, setTreatment] = useState('');\r\n  const [transactionHash, setTransactionHash] = useState(null);\r\n  const [patientRecords, setPatientRecords] = useState([]);\r\n\r\n  const authorizedProviders = [\r\n    '0xYourProviderAddress1',\r\n    '0xYourProviderAddress2',\r\n    // Add more provider addresses as needed\r\n  ];\r\n\r\n  const isAuthorizedProvider = (address) => {\r\n    return authorizedProviders.includes(address);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const createAccount = async () => {\r\n      const aptosAccount = new AptosAccount();\r\n      setAccount(aptosAccount);\r\n\r\n      await faucetClient.fundAccount(aptosAccount.address(), 100_000_000);\r\n\r\n      const resources = await client.getAccountResources(aptosAccount.address());\r\n      const accountResource = resources.find((r) => r.type === \"0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>\");\r\n      setBalance(accountResource.data.coin.value);\r\n    };\r\n\r\n    createAccount();\r\n  }, []);\r\n\r\n  const addRecord = async () => {\r\n    // Authorization check\r\n    if (!isAuthorizedProvider(account.address().toString())) {\r\n      alert(\"You are not authorized to add patient records.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const payload = {\r\n        type: \"entry_function_payload\",\r\n        function: `${account.address()}::HealthcareRecords::add_record`,\r\n        arguments: [patientID, diagnosis, treatment],\r\n        type_arguments: [],\r\n      };\r\n\r\n      const txnRequest = await client.generateTransaction(account.address(), payload);\r\n      const signedTxn = await client.signTransaction(account, txnRequest);\r\n      const transactionRes = await client.submitTransaction(signedTxn);\r\n\r\n      setTransactionHash(transactionRes.hash);\r\n      fetchPatientRecords();\r\n    } catch (error) {\r\n      console.error(\"Error adding record\", error);\r\n    }\r\n  };\r\n\r\n  const fetchPatientRecords = async () => {\r\n    try {\r\n      const data = await client.getAccountResources(account.address());\r\n      setPatientRecords(data); // Assuming that healthcare records are stored in account resources.\r\n    } catch (error) {\r\n      console.error(\"Error fetching patient records\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='container'>\r\n      <h1 className=\"title\">AptoMed</h1>\r\n      {account && <p className='account-info'>Account Address: {account.address().toString()}</p>}\r\n      {balance && <p className='account-info'>Account Balance: {balance / 1000000} APT</p>}\r\n\r\n      <div className='form-section'>\r\n        <h2>Fetch Patient Records</h2>\r\n        <input className='input-field' type='text' placeholder='Enter Patient ID' value={patientID} onChange={(e) => setPatientID(e.target.value)} />\r\n        <button className='action-button' onClick={fetchPatientRecords}>Fetch Records</button>\r\n      </div>\r\n\r\n      {isAuthorizedProvider(account?.address().toString()) && (\r\n        <div className=\"form-section\">\r\n          <h2>Add Patient Record</h2>\r\n          <input className='input-field' type='text' placeholder='Diagnosis' value={diagnosis} onChange={(e) => setDiagnosis(e.target.value)} />\r\n          <input className='input-field' type='text' placeholder='Treatment' value={treatment} onChange={(e) => setTreatment(e.target.value)} />\r\n          <button className='action-button' onClick={addRecord}>Add Record</button>\r\n        </div>\r\n      )}\r\n\r\n      {transactionHash && (\r\n        <p>Transaction Hash: {transactionHash}</p>\r\n      )}\r\n\r\n      <div className='records-section'>\r\n        <h2>Patient Records</h2>\r\n        {patientRecords.map((record, index) => (\r\n          <div key={index} className='record-card'>\r\n            <p>Record ID: {record.data.recordID}</p>\r\n            <p>Diagnosis: {record.data.diagnosis}</p>\r\n            <p>Treatment: {record.data.treatment}</p>\r\n            <p>Timestamp: {new Date(record.data.timestamp * 1000).toLocaleString()}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HealthCare;\r\n\r\n"],"mappings":";;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAIA;AACA;AACA;;AAEA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAGA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,YAAY,EAAEC,YAAY,EAAEC,SAAS,QAAQ,OAAO;AAAC,S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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}